///////
//
// НЕ ПЕРЕИМЕНОВЫВАТЕ В init.conf !!!!
// Актуальные параметры в current.conf 
// 
//
// Заполняйте init.conf правильно 
// https://github.com/immisterio/Lampac?tab=readme-ov-file#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-initconf
///////


{
  "listenip": "any", // any | broadcast | 127.0.0.1
  "listenport": 9118,
  "listenhost": "", // mydomain.com
  "listenscheme": "", // http | https
  "frontend": "", // cloudflare | nginx 
  "multiaccess": false, // если >100 человек
  "mikrotik": false, // true - для raspberry и home (ограничивает кеш в 1 минуту)
  "typecache": "hybrid", // mem|file|hybrid
  "pirate_store": true,
  "playerInner": "C:\\Program Files\\VideoLAN\\VLC\\vlc.exe", // внешний плеер для торрентов
  "filelog": false,
  "weblog": { // IP:9118/weblog
    "enable": false,
    "token": ""
  },
  "openstat": { // IP:9118/stats/*
    "enable": false,
    "token": null
  },
  "apikey": "",
  "litejac": true, // Включить Jackett в Lampa Lite
  "corsehost": "https://cors.apn.monster",
  "apn": {
    "host": "https://apn.watch", // либо http://apn.cfhttp.top для старых тв
    "secure": "none", // cf|nginx|none
	"secret": "my_secret_key"
  },
  "KnownProxies": [
    {
      "ip": "10.2.0.0",
      "prefixLength": 16 // https://infocisco.ru/prefix_network_mask.html
    },
	{
      "ip": "192.168.0.0",
      "prefixLength": 16
    }
  ],
  "LampaWeb": {
    "autoupdate": true,
	"index": "lampa-main/index.html", // redirect http://IP:9118/ to http://IP:9118/{index}
	"basetag": true,
	"intervalupdate": 90, // minute 
	"initPlugins": { // add default plugins to lampainit.js, liteinit.js
      "dlna": true,
	  "tracks": true,
	  "tmdbProxy": true,
	  "online": true,
	  "timecode": true,
	  "torrserver": true,
	  "sisi": true
	},
	"appReplace": {
      "app_version: '[^']+'": "app_version: '666'"
	}
  },
  "tmdb": {
    "DNS": "9.9.9.9",
    "API_IP": "", // 108.157.4.61
    "IMG_IP": "", // 138.199.37.225 or 138.199.36.9
    "useproxy": true,
    "proxy": {
      "list": [
        "socks5://127.0.0.1:9050" 
      ]
    }
  },
  "chromium": {
    "enable": true,
    "executablePath": "",  // для arm, mac | apt install -y chromium-browser | /usr/bin/chromium-browser
	"context": {
      "keepopen": true,  // разрешить держать браузер открытым для быстрой обработки запросов  (+30mb RAM на 1 context)
      "keepalive": 20,   // если context используется больше 20 минут, он уничтожается
      "min": 1,          // минимальное количество открытых context которые не закрываются keepalive
      "max": 4           // максимальное количество открытых context для быстрой обработки запроса
    }
  },
  "rch": {
    "enable": true,
    "keepalive": 45, // секунд
	"permanent_connection": true, // Разрешить постоянное подключение к сокету
	//"notSupportMsg": "Панда не хуйня, купи панду" // Сообщение для устройств которые не подходят по параметрам для самостоятельного парсинга и отсутствует параметр rhub_fallback true
  },
  "storage": {
    "enable": true,
    "max_size": 7000000, // 7MB
	"brotli": false,     // сжатие файлов
	"md5name": true      // имя файлов в md5
  },
  "sync": {
    "enable": false,
    "type": "",       // master|slave
	"initconf": "sync", // sync - sync.sonf | current - init.conf
	"api_host": "",   // slave - http://IP:9118  | master - null
	"api_passwd": "", // master - /home/lampac/passwd
	"override_conf": null // [{"IP", "mysync/ip.conf"}, {"IP2", "mysync/ip2.conf"}]
  },
  "serverproxy": {
    "enable": true,
    "encrypt": true,
	"verifyip": true,
	"forced_apn": false,
    "allow_tmdb": true,
	"showOrigUri": false,
	"buffering": {
	  "enable": true,
	  "rent": 8192,   // 8k - размер ячейки на чтение/запись потока
	  "length": 3906, // 32mb - максимальный размер буфера (3906 ячеек по 8192 байт на ячейку)
	  "millisecondsTimeout": 5 // интервал проверки между чтением и записью потока
	},
	"useproxy": false,
	"useproxystream": false,
	"proxy": null
  },
  "fileCacheInactive": {
	"maxcachesize": 400, // максимальный размер кеша в MB
	"intervalclear": 4,  // интервал очистки кэша в минутах
	"img": 10,           // актуальность кеша в минутах
	"hls": 90,
	"html": 5,
	"torrent": 40
  },
  "vast": {
	"url": "",
	"msg": ""
  },
  "Merchant": {
    "accessCost": 2,         // 2$
	"accessForMonths": 1,    // 1 месяц
	"allowedDifference": 0,
	"defaultGroup": 0, // группа пользователя по умолчанию
	"CryptoCloud": {
      "enable": false,
	  "SHOPID": "",
	  "APIKEY": "",
	  "SECRETKEY": ""
	  // IP:9118/cryptocloud/invoice/create?email=user@cub.red
	  // IP:9118/cryptocloud/callback
	},
	"FreeKassa": {
      "enable": false,
	  "shop_id": 0,
	  "secret": ""
	  // IP:9118/freekassa/new?email=user@cub.red
	  // IP:9118/freekassa/callback
	},
	"Streampay": {
      "enable": false,
	  "store_id": 0,
	  "public_key": "",
	  "private_key": ""
	  // IP:9118/streampay/new?email=user@cub.red
	  // IP:9118/streampay/callback
	},
	"LtcWallet": {
      "enable": false,
	  "rpc": "http://127.0.0.1:9332/",
	  "rpcuser": "ltc",
	  "rpcpassword": "ltc"
	  // https://serveradmin.ru/ustanovka-i-nastroyka-nodyi-bitcoin-ethereum-dash-litecoin-cardano/
	},
	"B2PAY": {
      "enable": false,
	  "username_id": 0,
	  "encryption_iv": "",
	  "encryption_password": ""
	  // IP:9118/b2pay/new?email=user@cub.red
	  // IP:9118/b2pay/callback
	}
  },
  "accsdb": {
    "enable": false,
	"whitepattern": "^/over/",
	//"premium_pattern": "",  // ^/(lite/(filmix|zetflix|videodb)|bgs|elo)($|/)
	//"domainId_pattern": "", // ^([^\.]+)\.domain.com$
    "maxip_hour": 15,         // лимит 15 ip в час на пользователя
	"maxrequest_hour": 300,   // лимит 300 запросов в час на пользователя
	"maxlock_day": 3,         // если за 24ч пользователь 3 раза превышает лимиты "maxip_hour, maxrequest_hour", аккаунт блокируется на blocked_hour
	"blocked_hour": 36,       // блокировка на 36ч
	"authMesage": "Войдите в аккаунт - настройки, синхронизация", // выводится если у пользователя нету идентификаторов "uid, token, account_email"
	"denyMesage": "Добавьте {account_email} в init.conf",
	"denyGroupMesage": "У вас нет прав для просмотра этой страницы",
	"expiresMesage": "Время доступа для {account_email} истекло в {expires}",
	"accounts": {
	  "megachel@gmail.com": "2040-10-17T00:00:00", // email cub.red
	  "pekdegtw": "2040-10-17T00:00:00"            // lampac uid
	},
	"users": [  // либо через отдельный файл /home/lampac/users.json с той же структурой json, смотрите users.example.json
	  {
        "id": "admin@gmail.com",
		"expires": "2040-10-17T00:00:00",
		"group": 1 // по умолчанию у всех пользователей и балансеров 0
	  },
	  {
        "id": "megachel@gmail.com",       // email cub.red 
		"ids": ["pekdegtw", "redqeyrs"],  // lampac uid
		"expires": "2040-10-17T00:00:00",
		"ban": false, 
		"ban_msg": null,
		"comment": "комент для себя"
	  }
	]
  },
  "ffprobe": {
    "enable": true,
	"tsuri": ""   // server ts http://IP:8090
  },
  "dlna": {
    "enable": true,
	"path": "dlna",            // D:\\dlna | /home/arhiv | dlna/public
    "mode": "normal",          // normal (быстро) || stream - последовательная загрузка файла (медленно)
	"downloadSpeed": 0,        // maximum download speed, in bytes per second   (0 - unlimited | 125000 == 1Mbit/s)
	"maximumDiskReadRate": 0,  // maximum disk read speed, in bytes per second  (0 - unlimited | 125000 == 1Mbit/s)
	"maximumDiskWriteRate": 0, // maximum disk write speed, in bytes per second (0 - unlimited | 125000 == 1Mbit/s)
	"listenPort": 0, // random
	"allowedEncryption": true,
	"addTrackersToMagnet": true,
	"autoupdatetrackers": true,
	"intervalUpdateTrackers": 90 // minute
  },
  "sisi": {
    "xdb": false,
	"rsize": true,
	"rsize_host": "", // http://host.io/{width}:{height}/{sheme}://{uri}  ||  http://host.io/proxyimg/{encrypt_uri}  ||  http://host.io/proxyimg:{width}:{height}/{encrypt_uri}
	"rsize_disable": ["BongaCams", "Chaturbate"],
	"heightPicture": 240, // 0 == bypass
	"widthPicture": 0,
	"component": "sisi",
	"iconame": null,
	"bookmarks": {
	  "saveimage": true,
	  "savepreview": true
	}
  },
  "online": {
	"findkp": "all", // all | alloha | tabus | vsdn
	"checkOnlineSearch": true,
	"component": "lampac",
	"name": "Lampac",
	"description": "Плагин для просмотра онлайн сериалов и фильмов",
	"version": true
  },
  
  
  "globalproxy": [
    {
      "pattern": "example\\.(com|net)", // любые запросы к доменам example.com / example.net
      "useAuth": false,
      "BypassOnLocal": false,
      "username": "",
      "password": "",
      "list": [
		"ip:port",
		"socks5://ip:port"
      ]
    },
	{
      "pattern": "\\.onion",        // любые запросы к доменам onion
      "list": [
		"socks5://127.0.0.1:9050"
      ]
    },
	{
      "name": "prox1",
      "useAuth": true,
      "BypassOnLocal": false,
      "username": "d56kj6",
      "password": "d8ah80",
      "list": [
        "socks5://ip1:36180"
      ]
    },
    {
      "name": "prox2",
      "useAuth": true,
      "BypassOnLocal": false,
      "username": "2",
      "password": "2",
      "list": [
        "socks5://ip1:36180",
        "socks5://ip2:36180"
      ]
    },
    {
      "name": "prox3",
      "list": [
        "socks5://ip2:36180"
      ]
    }
  ],
  "overrideResponse": [
	{
      "firstEndpoint": true,                        // обрабатывается до авторизации и отдачи файлов
      "pattern": "/lampa-main/img/loader.svg",
      "action": "file",
      "type": "image/svg+xml; charset=utf-8",
      "val": "wwwroot/lampa/img/loader.svg"
	},
	{
      "firstEndpoint": false,                       // обрабатывается после авторизации
      "pattern": "/over/text",
      "action": "html",
	  "type": "text/plain; charset=utf-8",
	  "val": "text"
    },
	{
      "pattern": "/over/online.js",
      "action": "file",
	  "type": "application/javascript; charset=utf-8",
	  "val": "plugins/online.js"
    },
	{
      "pattern": "/over/gogoole",
      "action": "redirect",
	  "val": "https://www.google.com/"
    }
  ],
  
  
  "BongaCams": {
    "host": "https://rt.bongacams.com", // адрес сайта
    "useproxy": true,                   // использовать прокси
    "globalnameproxy": "prox1"          // globalproxy - prox1
  },
  "Chaturbate": {
    "useproxy": true,
    "useproxystream": true,            // видеопоток отправлять через прокси prox2
    "globalnameproxy": "prox2"
  },
  "Ebalovo": {
    "useproxy": true,
	"proxy": {
      "list": [                       // прокси socks5
        "socks5://ip:5481"
	]}
  },
  "Eporner": {
    "useproxy": true,
	"proxy": {
      "list": [                       // прокси списком
        "http://ip1:5481",
		"http://ip2:5481",
		"socks5://ip3:5481"
	]}
  },
  "Animebesst": {
    "useproxy": true,
    "proxy": {
      "url": "https://asocks-list.org/userid.txt?type=res&country=UA" // // Список прокси из url
    }
  },
  "AnilibriaOnline": {
    "useproxy": true,
    "proxy": {
      "file": "proxylist.txt" // список прокси из файла - /home/lampac/proxylist.txt
    }
  },
  "Animevost": {
    "useproxy": true,
    "proxy": {
      "url": "https://asocks-list.org/userid.txt?type=res&country=UA",
      "maxRequestError": 4,   // если прокси 4 раза подряд вернул ошибку, найти другой прокси проходящий проверку ниже
      "actions": [{
          "url": "https://animevost.org/tip/tv/2872-chainsaw-man.html",
          "contains": "2147422797"
        },
        {
          "url": "https://animevost.org/frame5.php?play=2147422797&old=1",
          "contains": "2147422797.mp4"
        }
      ]
    }
  },
  "HQporner": {
	"corseu": true,                            // web-прокси из corsehost или webcorshost
	"webcorshost": "http://cors.cfhttp.top"    // указать свой web-прокси вместо corsehost
  },
  "Porntrex": {
	"streamproxy": true    // видеопоток пускать через сервер
  },
  "Spankbang": {
	"streamproxy": true,
	"apnstream": true      // видеопоток через внешний сервер cf/nginx, настойки из глобального "apn":
  },
  "Xhamster": {
	"streamproxy": true,
	"apnstream": true,
	"apn": {
      "host": "http://IP:8975", // lampac/nginx/upn.conf
      "secure": "nginx",
	}
  },
  "Xnxx": {
	"qualitys_proxy": true      // разрешить видеопоток через сервер, если видео напрямую будет запущено с ошибкой
  },
  "Tizam": {
    "enable": false             // отключаем источник
  },
  "PornHub": {
	"group": 1,                 // Доступен для пользователей "accsdb" с группой 1 и выше
	"group_hide": false         // Группа 0 видит балансер в списке источников, но не имеет к нему доступа {denyGroupMesage}
  },
  "PornHubPremium": {
    "host": "https://rt.pornhubpremium.com",
	"cookie": "",
	"group": 1                  // Тоже самое что выше,  но пользователи с группой 0 не видят балансер в списке доступных
  },
  "Xvideos": {
	"streamproxy": true,
    "geostreamproxy": ["RU", "BY"]  // Для RU/BY видеопоток будет идти через сервер, остальные получают прямую ссылку
  },
  "XvideosRED": {
    "displayname": "NeXvideosRED", // смена названия на свое
  },
  "KinoPub": {
    "enable": true,
    "apihost": "https://api.srvkp.com",
	"filetype": "hls4", // hls | hls4 | mp4
    "token": "",
	//"tokens": ["1", "2", "etc"],
  },
  "Filmix": {
	"user_apitv": "",   // Для PRO+ аккаунтов 
	"passwd_apitv": "", 
	"token": "", // через https://filmix.biz/consoles
	//"tokens": ["1", "2", "etc"],
	"pro": false, // true если у аккаунта PRO+
  },
  "FilmixTV": {
    "enable": true,
	"user_apitv": "",   // Для PRO+ аккаунтов 
	"passwd_apitv": "", 
	"pro": true, // true если у аккаунта PRO+
  },
  "VoKino": {
    "token": "",
    "online": {
      "vokino": true,
      "filmix": true,
      "alloha": true,
      "videocdn": true,
      "ashdi": true,
      "hdvb": true,
      "vibix": true
    }
  },
  "Rezka": {
    "host": "https://hdrezka.me",
	"uacdn": "https://prx2-ams.ukrtelcdn.net", // or https://prx.ukrtelcdn.net
	"forceua": false, // Включает uacdn независимо от GeoIP
	"scheme": "http",
	"login": "", // Для обычных не Premium аккаунтов, для prem используйте RezkaPrem ниже
	"passwd": "",
	"cookie": "", // авторизация через cookie, вместо login/passwd
	"streamproxy": false, // Если lampac стоит на vps, один из параметров streamproxy|xrealip|xapp должен быть в true 
  },
  "RezkaPrem": {
    "enable": false, // При включении ОБЯЗАТЕЛЬНО отключите обычную Rezka
	"login": "",
	"passwd": "",
	"cookie": "", // авторизация через cookie, вместо login/passwd
	"streamproxy": false, // Если lampac стоит на vps, streamproxy или xrealip в true 
	"xrealip": false,
	"hls": false,
	"scheme": "http"
  },
  "Collaps": {
	"two": true,   // show 720p hls and 1080p dash 
	"dash": false, // 1080p
  },
  "Ashdi": {
    "geo_hide": ["RU", "BY"] // Не выводить источник для RU/BY ip
  },
  "Kinoukr": {
    "rhub": true  // Выполнять запросы к источнику на клиенте
  },
  "Kinotochka": {
    "rhub": true,
    "rhub_fallback": true,      // Разрешить выполнить запрос на сервере, если клиент не смог
    "rhub_geo_disable": ["RU"]  // Для RU выполнять запросы только через сервер
  },
  "Redheadsound": {
    "overridehost": "http://ip:9118/lite/redheadsound"  // обработка запросов для этого источника, через указанный сервер
  },
  "iRemux": {
    "overridehosts": [                                  // Тоже самое, но в списке несколько серверов
      "http://ip1:9118/lite/remux",
      "http://ip2:9118/lite/remux"
    ]
  },
  "FilmixPartner": {
    "host": "http://5.61.56.18/partner_api",
    "enable": false,
	"APIKEY": "",
	"APISECRET": "",
	"user_name": "",
	"user_passw": ""
  },
  "VideoCDN": { // helpdesk@lumex.ink
    "enable": true,
    "log": false,
    "username": "",
    "password": "", // API пароль для интеграции
    "domain": "",
    "token": "",
    "clientId": "",
    "scheme": "http",
    "hls": false,
    "disable_protection": true,  // отключить проверку на бота
    "disable_ads": true,         // отключить рекламу 
    "verifyip": false            // отключить привязку к ip
  },
  "PidTor": {
    "redapi": "http://redapi.cfhttp.top", // https://jacred.xyz
	"apikey": "",
    "min_sid": 15,
	"max_size": 0, // 1000000000 (1GB)
	"max_serial_size": 0, // 1000000000 (1GB)
	"sort": "date", // size|sid|date
	"filter": "", // (Дубляж|MovieDalen|Red Head Sound|RHS)
	"filter_ignore": "", // (Telesync|TS-AVC|Camrip)
	"base_auth": { // default null
      "enable": true,
      "login": "ts",
      "passwd": "ts"
    },
	"torrs": [ // default null
      "http://ip:8090",
      "http://ip2:9118/ts",
      "etc"
    ],
    "auth_torrs": [ // default null
      {
		"enable": true,
		"host": "http://ip:8090",
		"login": "ts",
		"passwd": "ts"
      },
	  {
		"enable": true,
		"host": "http://ip:9118/ts",
		"login": "{account_email}", // заменяется на email пользователя
		"passwd": "ts"
      }
	]
  },
  "Zetflix": {
    "geostreamproxy": ["ALL"] // Видеопоток через сервер, если это не локальная сеть
  },
  "VDBmovies": {
    "headers": { // Заголовки запросов 
      "origin": "https://kinogo.media",
      "referer": "https://kinogo.media/"
    }
  },
  "Alloha": {
    "enable": false,
    "apihost": "https://api.apbugall.org",
	"linkhost": "https://torso-as.newplayjj.com:9443",
    "token": "",
	"secret_token": "",
    "localip": true,
	"m4s": true, // 4k, но кодек не работает на старых тв
  }
}